<th:block th:fragment="header">
  <div xmlns:th="http://www.thymeleaf.org"
       xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
    <style>
        button[type=submit] {
            all: unset;
            cursor: pointer;
        }

        .header-profile {
            cursor: pointer;
        }

        .icon {
            position: relative; top: 15px;
        }

        .icon img {
            cursor: pointer;
        }

        .thumb-box-header {
            width: 36px; /* 프로필 이미지의 원형 크기 */
            height: 36px; /* 프로필 이미지의 원형 크기 */
            border-radius: 50%; /* 원형 모양으로 만들기 */
            border: 1px solid white; /* 테두리 추가 */
            overflow: hidden; /* 원형 밖으로 이미지가 튀어나가지 않도록 숨김 */
            display: flex; /* 이미지 중앙 정렬을 위해 flexbox 사용 */
            justify-content: center; /* 가로 중앙 정렬 */
            align-items: center; /* 세로 중앙 정렬 */
        }

        .thumb-box-header img {
            width: 100%; /* 이미지의 너비를 박스 크기와 맞춤 */
            height: 100%; /* 이미지의 높이를 박스 크기와 맞춤 */
            object-fit: cover; /* 이미지의 가운데 부분만 보이도록 설정 */
            object-position: center; /* 이미지의 중심을 기준으로 잘림 처리 */
        }
    </style>
    <script>
        $(function () {
            $("#logo").click(function () {
                location.href = "/";
            })

            $("#cart").click(function () {
                location.href = "/member/cart";
            })

            $(".myPage").click(function () {
                location.href = "/member/myPage";
            })
        })
    </script>
    <div class="bg-light mb-3">
      <div class="container w-75">
        <div class="top-menu d-flex justify-content-end">
          <th:block sec:authorize-expr="not isAuthenticated()">
            <a href="/member/login" class="pe-2">로그인</a>
            <a href="/member/signup" class="pe-2">회원가입</a>
          </th:block>
          <th:block sec:authorize-expr="isAuthenticated()">
            <a href="/member/myPage" class="pe-2"><span sec:authentication="name"></span>님</a>
            <form th:action="@{/member/logout}" method="post">
              <button type="submit" class="pe-2">로그아웃</button>
            </form>
          </th:block>
          <a href="#" class="pe-2">고객센터</a>
          <th:block sec:authorize-expr="not isAuthenticated()">
            <a href="/seller/sellerLogin" class="pe-2">판매자 로그인</a>
            <a href="/seller/sellerSignup" class="pe-2">판매자 가입</a>
          </th:block>
        </div>
      </div>
    </div>
    <div class="container w-75 header d-flex align-items-center">
      <img id="logo" class="me-3" src="/img/user/kybo.png" alt="메인 로고">
      <div class="search-bar">
        <form class="d-flex search-box">
          <input class="form-control me-2 search-text border-0" type="text" placeholder="찾고 싶은 도서를 검색해 보세요!"
                 aria-label="Search">
          <button class="btn p-0 m-0 search-btn" type="submit">
            <img src="/img/user/search.png" width="36" height="36" alt="검색">
          </button>
        </form>
      </div>
      <div class="ms-5 icon d-flex">
        <div>
          <img src="/img/user/cart.png" id="cart" class="me-3" width="36" height="36" alt="장바구니">
        </div>
        <div th:if="${member == null}">
          <div class="thumb-box-header header-profile myPage border border-2 border-dark-subtle">
            <img src="/img/user/profile.png" alt="기본 프로필 이미지">
          </div>
        </div>
        <div th:unless="${member == null}">
          <div class="thumb-box-header header-profile myPage border border-2 border-dark-subtle" th:if="${member.profilePicture == null}">
            <img src="/img/user/profile.png" alt="기본 프로필 이미지">
          </div>
          <div class="thumb-box-header header-profile myPage border border-2 border-dark-subtle" th:unless="${member.profilePicture == null}">
            <img th:src="@{|/img/user/upload/${member.profilePicture}|}" alt="프로필 이미지">
          </div>
        </div>
      </div>
    </div>
  </div>
</th:block>
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="hello.fclover.mybatis.mapper.BackOfficeMapper">
    <select id="searchOrder">
        select * from payments
    </select>


    <select id="getProduct_stock">
        select product_stock from stock where goods_no=#{goodsNo}
    </select>

    <select id="searchSeller">
        select * from seller
    </select>

    <insert id="insertDeliveryReadyList">
        insert into delivery(payments_no,deli_status) values(#{orderId},#{status})
    </insert>

    <select id="deliveryReadyOrderSearch">
        select deli_no,deli_status from delivery where deli_status='배송준비중'
    </select>

    <update id="insertTrackingNumber">
        update delivery set deli_num=#{deliNum}, deli_company = #{deliCompany}, deli_status=#{deliStatus}
        where deli_no = #{deliNo}
    </update>

    <select id="deliveryInTransitOrderSearch">
        select deli_no,order_id,user_id,deli_status,created_at from delivery where deli_status='배송중'
    </select>

    <select id="deliveryDoneSearch">
        select deli_no,order_id,user_id,deli_status,created_at from delivery where deli_status='배송완료'
    </select>
    <update id="changeDeliveryDoneStatus">
        update delivery set deli_status=#{deliStatus}
        where deli_no = #{deliNo}
    </update>
    <select id="sellerSettlementSearch">
        select * from settlements
    </select>
    <select id="sellerGoodsApprovalSearch">
        select goods_no,seller_no,cate_no,goods_name,goods_content,goods_price,goods_writer,writer_content,goods_create_at,goods_date,permission
        from goods
        where permission='승인대기중'
    </select>
    <update id="goodsConfirmSuccess">
        update goods set permission='승인완료' where goods_no=#{goodsNo}
    </update>

    <select id="sellerPendingCheck">
        SELECT seller_no, seller_id, name, email, phone_number, business_number, company_name, permission FROM seller
    </select>

    <update id="updateSellerApproved">
        UPDATE seller SET permission = 'Approved' WHERE seller_no = #{sellerNo}
    </update>

    <update id="updateSellerRejected">
        UPDATE seller SET permission = 'Rejected' WHERE seller_no = #{sellerNo}
    </update>
</mapper>